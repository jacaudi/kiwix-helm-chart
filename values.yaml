# Global settings
global:
  fullnameOverride: ""
  nameOverride: ""

# Application images
images:
  kiwix:
    repository: ghcr.io/kiwix/kiwix-serve
    tag: latest
    pullPolicy: IfNotPresent
  downloader:
    repository: ghcr.io/jacaudi/kiwix-downloader
    tag: latest
    pullPolicy: IfNotPresent

# ZIM files to download
zimFiles:
  - url: https://download.kiwix.org/zim/wikipedia_en_100_2025-10.zim
    sha256: null

# Downloader configuration (single source of truth)
downloader:
  enabled: true
  schedule: ""  # Empty = Job, cron format (e.g., "0 2 * * 0") = CronJob
  resources: {}

# Main kiwix-serve application
kiwix:
  strategy: Recreate
  args:
    - /data/*.zim
  resources: {}
  probes:
    liveness:
      enabled: true
      path: /
      port: 8080
    readiness:
      enabled: true
      path: /
      port: 8080

# Service configuration
service:
  port: 8080

# Storage
persistence:
  size: 100Gi
  storageClass: ""
  accessMode: ReadWriteOnce
  retain: true

# Ingress (disabled by default)
ingress:
  enabled: false
  host: kiwix.local
  path: /
  pathType: Prefix

# Gateway API Route (disabled by default)
route:
  enabled: false
  kind: HTTPRoute
  gateway:
    name: ""
    namespace: ""
  hostname: kiwix.local

# Security settings
security:
  fsGroup: 1000
  fsGroupChangePolicy: "OnRootMismatch"
